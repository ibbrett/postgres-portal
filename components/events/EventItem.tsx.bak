'use client'

import {useUtils} from '@/hooks/useUtils'
import {ToggleEventComplete} from '@/components/events/ToggleEventComplete'
import {DeleteEvent} from '@/components/events/DeleteEvent'
import {EditEvent} from '@/components/events/EditEvent'
import {itemContainerStyle, itemLabelStyle} from '@/utils/styles'

type EventItemProps = {
  id: number
  type: number
  timestamp: number
  detail: string | null
  summary: string
  complete: boolean
  deleteEvent: (id: number, type: number) => void
  moveToggledEvent: (id: number, complete: boolean) => void
}

export function EventItem({
  id,
  type,
  timestamp,
  detail,
  summary,
  complete,
  deleteEvent,
  moveToggledEvent,
}: EventItemProps) {
  const {normalizeDateTimeTitle} = useUtils()

  return (
    <li className={`by-date active`} key={id}>
      <ToggleEventComplete
        id={id}
        complete={complete}
        moveToggledEvent={moveToggledEvent}
      />
      <DeleteEvent id={id} type={type} deleteEvent={deleteEvent} />
      <EditEvent id={id} />
      {/* removed from label to only allow checkbox to handle toggle - htmlFor={id.toString()} */}
      <label className={itemLabelStyle}>
        {normalizeDateTimeTitle(timestamp, summary)}
      </label>
      <pre>
        {detail} {id}
      </pre>
    </li>
  )
}
